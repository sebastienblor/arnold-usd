<fragment_graph  name="standardHairShader" ref="standardHairShader" class="FragmentGraph" version="1.0" feature_level="0" >
  <fragments>
    <fragment_ref name="mayaSurfaceShaderOutput" ref="mayaSurfaceShaderOutput" />
    <fragment_ref name="mayaComputeSurfaceFinal" ref="mayaComputeSurfaceFinal" />
    <fragment_ref name="hairShaderCombiner" ref="standardHairShaderCombiner" />
    <fragment_ref name="hairShaderBase" ref="standardHairShaderBase" />
    <fragment_ref name="standardFresnel" ref="standardFresnel" />
    <fragment_ref name="maya16LightAccum" ref="maya16LightAccum" />
    <fragment_ref name="mayaLambertDiffuse" ref="mayaLambertDiffuse" />
    <fragment_ref name="mayaShaderGeom" ref="mayaShaderGeom" />
    <fragment_ref name="mayaHVector" ref="mayaHVector" />
    <fragment_ref name="standardShaderEmission" ref="standardShaderEmission" />
    <fragment_ref name="roughnessPassThrough" ref="standardfloatPassThrough" />
    <fragment_ref name="iorPassThrough" ref="standardfloatPassThrough" />
    <fragment_ref name="melaninPassThrough" ref="standardfloatPassThrough" />
    <fragment_ref name="specularTintPassThrough" ref="standardfloat3PassThrough" />
    <fragment_ref name="standardHairSpecular" ref="standardHairSpecular" />
    <fragment_ref name="rougnessToScatter" ref="lerpFloat1" />
    <fragment_ref name="scatterConverter" ref="multiplyFloat" />
    <fragment_ref name="shiftConverter" ref="multiplyFloat" />
    <fragment_ref name="maya_FogDepthSurface" ref="maya_FogDepthSurface" />
  </fragments>
  <connections>
    <connect from="mayaComputeSurfaceFinal.mayaComputeSurfaceFinal" to="mayaSurfaceShaderOutput.mayaSurfaceShaderOutput" name="mayaSurfaceShaderOutput" />
    <connect from="hairShaderCombiner.output" to="mayaComputeSurfaceFinal.input" name="input" />
    <connect from="maya_FogDepthSurface.maya_FogDepthSurface" to="mayaComputeSurfaceFinal.maya_FogDepthSurface" name="maya_FogDepthSurface" />
    <connect from="maya16LightAccum.scaledDiffuse" to="hairShaderCombiner.diffuseInput" name="diffuseInput" />
    <connect from="maya16LightAccum.scaledSpecular" to="hairShaderCombiner.specularInput" name="specularInput" />
    <connect from="standardShaderEmission.outColor" to="hairShaderCombiner.emissionInput" />
    <connect from="mayaLambertDiffuse.mayaLambertDiffuse" to="maya16LightAccum.scaledDiffuse" name="scaledDiffuse" />
    <connect from="standardHairSpecular.standardHairSpecular" to="maya16LightAccum.scaledSpecular" name="scaledSpecular" />
    <connect from="mayaShaderGeom.mayaShaderGeom" to="standardFresnel.shaderGeomInput" name="shaderGeomInput" />
    <connect from="mayaShaderGeom.mayaShaderGeom" to="mayaLambertDiffuse.shaderGeomInput" name="shaderGeomInput" />
    <connect from="mayaHVector.mayaHVector" to="mayaShaderGeom.Hw" name="Hw" />
    <connect from="roughnessPassThrough.output" to="hairShaderCombiner.roughness" name="roughness" />

    <connect from="rougnessToScatter.lerpFloat1" to="standardHairSpecular.longitudinalWidthR" name="longitudinalWidthR" />
    <connect from="rougnessToScatter.lerpFloat1" to="scatterConverter.in0" />
    <connect from="scatterConverter.multiplyFloat" to="standardHairSpecular.longitudinalWidthTRT" />
    
    <connect from="roughnessPassThrough.output" to="rougnessToScatter.factor" name="factor" />
    <connect from="iorPassThrough.output" to="hairShaderCombiner.IOR" />
    <connect from="iorPassThrough.output" to="standardFresnel.IOR" />
    <connect from="hairShaderBase.output" to="hairShaderCombiner.B" />
    <connect from="hairShaderBase.output" to="standardHairSpecular.baseColor" />
    <connect from="standardFresnel.fresnel" to="hairShaderBase.fresnel" />
    <connect from="standardFresnel.fresnel" to="hairShaderCombiner.fresnel" />
    <connect from="standardFresnel.fresnel" to="standardHairSpecular.fresnel" />  

    <connect from="specularTintPassThrough.output" to="standardHairSpecular.colorTRT" />
    <connect from="specularTintPassThrough.output" to="hairShaderCombiner.specularTint2" />
    
    <connect from="melaninPassThrough.output" to="hairShaderBase.melanin" />
    <connect from="melaninPassThrough.output" to="standardHairSpecular.intensityTRT" />   

    <connect from="shiftConverter.multiplyFloat" to="standardHairSpecular.longitudinalShiftR" />
    <connect from="shiftConverter.multiplyFloat" to="standardHairSpecular.longitudinalShiftTRT" />
    
  </connections>
  <properties>
    <undefined  name="GPUStage" ref="mayaComputeSurfaceFinal.GPUStage" semantic="GPUStage" />
    <float name="base" ref="hairShaderBase.base" />
    <float3 name="baseColor" ref="hairShaderBase.baseColor" />
    <float name="melanin" ref="melaninPassThrough.inValue" />
    <float name="melaninRedness" ref="hairShaderBase.melaninRedness" />
    <float name="melaninRandomize" ref="hairShaderBase.melaninRandomize" />
    <float name="diffuse" ref="hairShaderCombiner.diffuse" />
    <float3 name="diffuseColor" ref="hairShaderCombiner.diffuseColor" />
    <float3 name="transmissionTint" ref="hairShaderCombiner.transmissionTint" />
    <float3 name="transparency" ref="hairShaderCombiner.transparency" />
    <float name="indirectDiffuse" ref="hairShaderCombiner.indirectDiffuse" />
    <float name="indirectSpecular" ref="hairShaderCombiner.indirectSpecular" />
    <float3 name="IrradianceEnv" ref="hairShaderCombiner.IrradianceEnv" />
    <float3 name="SpecularEnv" ref="hairShaderCombiner.SpecularEnv" />
    <float3 name="matteColor" ref="hairShaderCombiner.matteColor" />
    <float name="matteOpacity" ref="hairShaderCombiner.matteOpacity" />
    
    <float name="lambert_diffuse" ref="mayaLambertDiffuse.diffuse" />
    <float3 name="emissionColor" ref="standardShaderEmission.emissionColor" />
    <float name="emission" ref="standardShaderEmission.emission" />

    <float  name="extraOpacity" ref="mayaComputeSurfaceFinal.extraOpacity" />
    <bool  name="fogEnabled" ref="mayaComputeSurfaceFinal.fogEnabled" />
    <float3  name="Pw" ref="maya_FogDepthSurface.Pw" semantic="Pw" />
    <float4x4  name="ViewProj" ref="maya_FogDepthSurface.ViewProj" semantic="viewprojection" />
    <float  name="fogStart" ref="maya_FogDepthSurface.fogStart" />
    <float  name="fogEnd" ref="maya_FogDepthSurface.fogEnd" />
    <int  name="fogMode" ref="maya_FogDepthSurface.fogMode" />
    <float  name="fogDensity" ref="maya_FogDepthSurface.fogDensity" />
    <float4  name="fogColor" ref="mayaComputeSurfaceFinal.fogColor" />
    <float  name="fogMultiplier" ref="mayaComputeSurfaceFinal.fogMultiplier" />

    <float  name="roughness" ref="roughnessPassThrough.inValue" />
    <float  name="ior" ref="iorPassThrough.inValue" />
    <string  name="selector" ref="maya16LightAccum.selector" />

    <float3  name="Nw" ref="mayaShaderGeom.Nw" flags="varyingInputParam" />
    <float3  name="Nw" ref="standardHairSpecular.Nw" flags="varyingInputParam" />
    
    <float3  name="Lw" ref="mayaShaderGeom.Lw" />
    <float3  name="Vw" ref="mayaShaderGeom.Vw" flags="varyingInputParam" />
    <float3  name="Vw" ref="standardHairSpecular.Vw" flags="varyingInputParam" />
    
    <float3  name="HLw" ref="mayaHVector.HLw" />
    <float3  name="diffuseI" ref="mayaLambertDiffuse.diffuseI" />


    <float3  name="specular2Tint" ref="specularTintPassThrough.inValue" />
    <float3  name="specularTint" ref="standardHairSpecular.colorR" />
    <float  name="shift" ref="shiftConverter.in0" />
    <float  name="shiftConvert" ref="shiftConverter.in1" />
    <float  name="spread" ref="scatterConverter.in1" />
    <bool  name="bFaceCamera" ref="standardHairSpecular.bFaceCamera" />
    
    <float3  name="specularI" ref="standardHairSpecular.specularI" />
    <float3  name="SLw" ref="standardHairSpecular.SLw" />
    <float3  name="mayaTangentIn" ref="standardHairSpecular.mayaTangentIn" semantic="tangent" flags="varyingInputParam" />
    <float3  name="mayaBitangentIn" ref="standardHairSpecular.mayaBitangentIn" semantic="bitangent" flags="varyingInputParam" />
    <float4x4  name="worldInverseTranspose" ref="standardHairSpecular.worldInverseTranspose" semantic="worldinversetranspose" />

    <float  name="scatterMin" ref="rougnessToScatter.start" />
    <float  name="scatterMax" ref="rougnessToScatter.end" />
    <float  name="intensityR" ref="standardHairSpecular.intensityR" />
    <float3  name="colorTT" ref="standardHairSpecular.colorTT" />
    <float  name="intensityTT" ref="standardHairSpecular.intensityTT" />
    <float  name="longitudinalShiftTT" ref="standardHairSpecular.longitudinalShiftTT" />
    <float  name="longitudinalWidthTT" ref="standardHairSpecular.longitudinalWidthTT" />
    <float  name="azimuthalWidthTT" ref="standardHairSpecular.azimuthalWidthTT" />
    <float3  name="colorG" ref="standardHairSpecular.colorG" />
    <float  name="azimuthalShiftG" ref="standardHairSpecular.azimuthalShiftG" />
    <float  name="azimuthalWidthG" ref="standardHairSpecular.azimuthalWidthG" />

  </properties>
  <values>
    <float3 name="Lw" value="0.000000,0.000000,0.000000"  />
    <float3 name="HLw" value="0.000000,0.000000,0.000000"  />
    <float3 name="diffuseI" value="0.000000,0.000000,0.000000"  />
    <float name="lambert_diffuse" value="1.00000"  />
    <float3 name="specularI" value="0.000000,0.000000,0.000000"  />
    <float3 name="SLw" value="0.000000,0.000000,0.000000"  />
    <float name="roughness" value="0.2"  />
    <float name="ior" value="1.55"  />
    <float3 name="IrradianceEnv" value="0.000000,0.000000,0.000000"  />
    <float3 name="SpecularEnv" value="0.000000,0.000000,0.000000"  />
    <float name="extraOpacity" value="1.000000"  />

    <float3 name="specularTint" value="1.000000,1.000000,1.000000"  />
    <float name="intensityR" value="0.3000"  />
    <float3 name="specular2Tint" value="0.500000,0.500000,0.500000"  />

    <float name="scatterMin" value="2.000000"  />
    <float name="scatterMax" value="10.000000"  />
    <float name="shiftConvert" value="-1.000000"  />
    <float name="spread" value="2.000000"  />
    
    <float3 name="colorTT" value="1.000000,1.00000,1.00000"  />
    <float name="intensityTT" value="0.000000"  />
    <float name="longitudinalShiftTT" value="3.750000"  />
    <float name="longitudinalWidthTT" value="3.750000"  />
    <float name="azimuthalWidthTT" value="3.000000"  />
    <float3 name="colorG" value="1.000000,1.00000,1.00000"  />
    <float name="azimuthalShiftG" value="35.000000"  />
    <float name="azimuthalWidthG" value="15.000000"  />

    <bool name="fogEnabled" value="false"  />
    <float name="fogStart" value="0.000000"  />
    <float name="fogEnd" value="92.000000"  />
    <int name="fogMode" value="0"  />
    <float name="fogDensity" value="0.100000"  />
    <float4 name="fogColor" value="0.500000,0.500000,0.500000,1.000000"  />
    <float name="fogMultiplier" value="1.000000"  />
  </values>
  <outputs>
    <struct  name="mayaSurfaceShaderOutput" ref="mayaSurfaceShaderOutput.mayaSurfaceShaderOutput" />
    <float3  name="outTransparency" ref="mayaSurfaceShaderOutput.outTransparency" />
  </outputs>
</fragment_graph>