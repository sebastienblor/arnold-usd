Before you can use Arnold in Maya you will need to install the MtoA plug-in and
tell Maya to use it.

Note that there is one plug-in for each version supported version of Maya, per
supported operating system:

 - Maya 2011, Windows 64 bit
 - Maya 2011, Linux 64 bit
 - Maya 2011, Mac OS X (64 bit 10.6 Snow Leopard or later)
 
 - Maya 2012, Windows 64 bit
 - Maya 2012, Linux 64 bit
 - Maya 2012, Mac OS X (64 bit 10.6 Snow Leopard or later)
 
 - Maya 2013, Windows 64 bit
 - Maya 2013, Linux 64 bit
 - Maya 2013, Mac OS X (64 bit 10.6 Snow Leopard or later)
 
 == Installation under Windows using the Installer == 
 
From 0.17, MtoA for Windows is distributed via an installer. Download the installer .exe,
and run it.
 
The installer has the option to set up environment variables for you, and copy the correct
information into the mtoa.mod file. This option is enabled by default, and will copy the
mtoa.mod file to the user documents folder, where Maya will read on launch. Then, the
corresponding variables are appended to the maya.env (MAYA_RENDER_DESC_PATH and PATH).
Alternatively, you can set up environment variables yourself (see 'Installing by hand'
section below for more details about environment variables).
 
Be careful if you have a previous installation of MtoA with variables defined in the
maya.env file. In this situation, you should remove them before installing the new MtoA.
If the Maya environment files option is disabled, users will have to configure the variables
in the usual way until now.
 
After selecting the components to install, click Next, select the destination folder on the
next dialog, and click next again. You'll then have the option to add a shortcut to your Start
Menu if you wish, before commencing the installation by clicking the Install button.
 
 == Uninstalling == 

If you have already installed a previous version of MtoA using the installer, then the installer
will detect this and tell you that the old installation must be uninstalled before you can install
the new one. You can do this in several ways;
 
 • if the installer finds the old installation where it expects to, it will run the uninstall
   program for you - you will then be able to run the installer a second time and complete the
   new installation
 
 • alternatively, you can remove the old version by finding the MtoA group in the Windows Start
   menu, and selecting Uninstall
 
 • or by locating the Uninstall.exe file in the folder where you installed the previous version
   of MtoA to, and executing that yourself
 
 • or by using the Add/Remove programs function in Windows.
 

 == Installing by hand == 

If you prefer, you can install to a temporary folder and then copy the installation folder
contents manually. This might be useful, for example, if you wish to install across a network.
 
To do this, make sure you uncheck the option 'Configure Environment Variables' on the installer,
and select a suitable temporary folder to install to. The following instructions assume that you
are using Windows and Maya 2012 and have copied the contents of your temporary install folder to
the following target location:
 
   C:\solidangle\mtoadeploy\2012
 
Next, complete the following steps:
 
 1.First, locate the mtoa.mod file:
 
     C:\Users\<User_Name>\Documents\maya\20XX-x64\modules\mtoa.mod
 
   Open this file in a text editor and make sure the single line contains the correct path,
   like so:
 
     + mtoa any C:\solidangle\mtoadeploy\2012
 
 2.Then, create another environment variable MAYA_RENDER_DESC and set that to point at the location
   of the arnoldRenderer.xml file (in this example, C:\solidangle\mtoadeploy\2012).
 
 3.Finally, you also need to add the location of the Arnold binaries to your path. Edit the PATH
   environment variable and add the bin folder to the path, for example:
 
     C:\solidangle\mtoadeploy\2012\bin
 
 4.Now, run Maya. You should see the Arnold Renderer listed under the Render > Render Using menu.
   If not, go to Window > Settings/Preferences > Plug-in Manager. If you don't yet see the MtoA
   plug-in listed, click on the Browse button and locate the mtoa.mll file
   (under C:\solidangle\mtoa\2012\plug-ins). 
 
 == Linux users == 

The Linux distribution does not have an installer, so o install under Linux you will need to
download, unpack and copy the contents to the appropriate location, then set environment variables,
etc. T do this, follow the above steps described for installing on Windows by hand, but using Linux
conventions (use LD_LIBRARY_PATH to add the path).


 == Mac OS X users ==

The following instructions assume that you are using MtoA 0.19.0 or higher, Autodesk Maya 2012 and
have uncompressed the package to the following location:
 
   /Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012/
 
Locate mtoa.mod in
 
   /Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012/
 
Open the file with TextEdit and check the path is pointing to the folder where MtoA is located. In
this case it should be:
 
   + mtoa any /Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012
 
Then, there are several environment variables you need to fill.
 
MAYA_MODULE_PATH and MAYA_RENDER_DESC_PATH should point to the root folder of the MtoA distribution,
and PATH should append the current path with the bin folder of the MtoA distribution
 
In this particular example:
 
   MAYA_MODULE_PATH = /Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012
   MAYA_RENDER_DESC_PATH = /Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012
   PATH = %PATH%:/Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012/bin
 
You can set the environment variables manually, with a script, or using maya.env (located in
/Users/solidangle/Library/Preferences/Autodesk/maya/2012-x64/). There are also other ways to set the
environment variables:
 
 • Via .cshrc (or .bashrc depending on what terminal shell you're using)
 • Via the environment.plist file (this file is described in the Apple developer documentation
   https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html)
 
To simplify the process we provide you the following Python script that sets all the variables without
the need of setting them in maya.env and launches Maya (2012 in this example). To make it work you will
need to fill the mtoa_path variable in the script to point to the corresponding MtoA path.


#!/usr/bin/env python
import os, subprocess
 
mtoa_path = "/Users/solidangle/Development/MtoA/MtoA-0.19.0-darwin64-2012/"
 
if "MAYA_MODULE_PATH" in os.environ:
    os.environ["MAYA_MODULE_PATH"] += ':' + mtoa_path
else:
    os.environ["MAYA_MODULE_PATH"] = mtoa_path
os.environ["ARNOLD_PLUGIN_PATH"] = os.path.join(mtoa_path, "shaders")
os.environ["MTOA_EXTENSIONS_PATH"] = os.path.join(mtoa_path, "extensions")
os.environ["MAYA_RENDER_DESC_PATH"] = mtoa_path
 
# Launch Maya
subprocess.Popen("/usr/bin/open -n /Applications/Autodesk/maya2012/Maya.app", shell=True)
 
 
 

Note that setting up all these environment variables if you are using several versions of Maya can be a
pain - an alternative approach is outlined in the MtoA Usage FAQ, but the above method is the simplest
and easiest to begin with.


 == Rendering with Arnold ==

Now you should be able to choose the Arnold renderer. There are several ways to do this:
 
 • Click Render > Render Using, then choose the Arnold Renderer.
 
 • Select Arnold from the drop-down list in Render View (Window > Rendering Editors > Render View).
 
 • Select Arnold from the drop-down list in the Render Settings window.
 
To make Arnold the default renderer:
 
 1.Click Window > Settings/Preferences > Preferences.
 
 2.Select the Rendering category and set the Preferred Renderer option.
 
 
At this point rendering with Arnold is possible, but rendered images will be watermarked. To remove the
watermarking, you need to set up an Arnold's licence server.
 
If you are still having trouble with installation, consult the Troubleshooting topic which follows.


 == Installing MtoA - Troubleshooting ==

If you followed the installation instructions (in the previous section of this help), and are still
having problems, then try these steps:
 
 
-If the installer says MtoA is already installed, but doesn't uninstall it for you-
 
The installer will try to run the uninstall program for the previous installation if it detects that
a previous version is already installed. However, if for some reason you moved, deleted or renamed the
old install folder before running the installer, it will not be able to find the old uninstaller. You
will need to either locate and run the Uninstall.exe program for the old installation yourself, if you
still have it, or failing that uninstall by either finding the uninstall option in the MtoA folder of
the Windows Start menu, or using Add/Remove programs in Windows.
 
 
-If you cannot see the MtoA plugin in Maya Plug-in Manager-
 
 1. Check that a file mtoa.mod exists in this folder:
      C:\Users\<User_Name>\Documents\maya\2012-x64\modules
    And it contains this text:
      + mtoa any C:\solidangle\mtoadeploy\2012
 
 2. Try to set the following environment variables in your system:
 
      MAYA_PLUG_IN_PATH=C:\solidangle\mtoadeploy\2012\plug-ins
      MAYA_SCRIPT_PATH=C:\solidangle\mtoadeploy\2012\scripts
      XBMLANGPATH=C:\solidangle\mtoadeploy\2012\icons
 
 
-If you can see the MtoA plugin, but it does not load-
 
In this case, or if the plugin crashes when trying to load, try the following steps:
 
 1.Set the following environment variable:
 
      PYTHONPATH=C:\solidangle\mtoadeploy\2012\scripts
 
 2.Create global environment variables for the definitions in the
   C:\Users\<User_Name>\Documents\maya\2012-x64\Maya.env
 
      ARNOLD_PLUGIN_PATH = C:\solidangle\mtoadeploy\2012\shaders
      MTOA_EXTENSIONS_PATH = C:\solidangle\mtoadeploy\2012\extensions
      MAYA_RENDER_DESC_PATH = C:\solidangle\mtoadeploy\2012
      PATH = %PATH%;C:\solidangle\mtoadeploy\2012\bin
 
 3.Remove (and backup) your Maya preferences folder:
 
      C:\Users\<User_Name>\Documents\maya\2012-x64\prefs
 
 4.Try MtoA using a clean Maya installation
 
 5.Try MtoA using a clean or newly configured computer


